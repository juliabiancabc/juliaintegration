{% extends "base.html" %}
{% block content %}
<div class="container-fluid mt-4">
    <div class="row">
        <div class="col-md-2">
            <div class="sidebar bg-dark text-white" style="min-height: 80vh;">
                <div class="p-3">
                    <h5><i class="fas fa-shield-alt"></i> Moderator</h5>
                    <p class="small text-muted">Platform Admin</p>
                    <hr>
                    <a href="{{ url_for('moderator_dashboard') }}" class="sidebar-item text-white active">
                        <i class="fas fa-chart-line"></i> Dashboard
                    </a>
                    <a href="#" class="sidebar-item text-white">
                        <i class="fas fa-flag"></i> Flagged Users
                    </a>
                    <a href="#" class="sidebar-item text-white">
                        <i class="fas fa-file-alt"></i> Reports
                    </a>
                    <a href="#" class="sidebar-item text-white">
                        <i class="fas fa-users"></i> All Users
                    </a>
                    <a href="{{ url_for('stories.mod_manage_posts') }}" class="sidebar-item text-white">
                        <i class="fas fa-book"></i> Content Review
                    </a>
                    <a href="{{ url_for('stories.mod_admin_settings') }}" class="sidebar-item text-white">
                        <i class="fas fa-cog"></i> Admin Settings
                    </a>
                    <a href="#" class="sidebar-item text-white">
                        <i class="fas fa-calendar"></i> Events
                    </a>
                </div>
            </div>
        </div>
        <div class="col-md-10">
            <h2 class="mb-4">Moderator Dashboard</h2>
            <p class="text-muted">Monitor platform activity and handle moderation tasks</p>
            
            <div class="row mb-4">
                <div class="col-md-4">
                    <div class="card-custom" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <h6>Total Users</h6>
                        <h2>{{ total_users }}</h2>
                        <small>+120% from last month</small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card-custom" style="background: linear-gradient(135deg, #f97316 0%, #dc2626 100%); color: white;">
                        <h6>Flagged Users</h6>
                        <h2>{{ flagged_users }}</h2>
                        <small>Requires attention</small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card-custom" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); color: white;">
                        <h6>Pending Reports</h6>
                        <h2>{{ pending_reports }}</h2>
                        <small>Action needed</small>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="card-custom">
                        <h5 class="mb-3">Quick Actions</h5>
                        <a href="#" class="btn btn-primary-custom mb-2 d-block">Review Flagged Users</a>
                        <a href="{{ url_for('stories.mod_flagged_posts') }}" class="btn btn-outline-primary mb-2 d-block">Review Flagged Posts</a>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card-custom">
                        <h5 class="mb-3">Recent Activity</h5>
                        {% for activity in recent_activity %}
                        <div class="mb-2">
                            <strong>{{ activity.full_name }}</strong> changed {{ activity.field_changed }}
                            <br><small class="text-muted">{{ activity.changed_at }}</small>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
